{% extends 'base.html' %}
{% block title %}Book Event{% endblock %}

{% block content %}
<section
    class="booking-form py-5"
    data-bg-url="{% static 'images/booking-background.jpg' %}"
    style="
        padding-top: 70px;
        padding-bottom: 70px;
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        background-repeat: no-repeat;
        color: #fff;"
>
    <div class="container">
        <h2 class="text-center mb-5 font-weight-bold text-success">Book Your Event</h2>
        <form method="POST" class="form-elegant">
            {% csrf_token %}
            <div class="row justify-content-center">
                <!-- First Column: Customer Info and Event Info -->
                <div class="col-md-6">
                    <!-- Customer Name -->
                    <div class="form-group">
                        <label for="{{ form.cus_name.id_for_label }}">Your Name</label>
                        {{ form.cus_name }}
                        {% if form.cus_name.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.cus_name.errors %}
                            <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <!-- Phone Number -->
                    <div class="form-group">
                        <label for="{{ form.cus_ph.id_for_label }}">Phone Number</label>
                        {{ form.cus_ph }}
                        {% if form.cus_ph.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.cus_ph.errors %}
                            <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <!-- Email Address -->
                    <div class="form-group">
                        <label for="{{ form.cus_email.id_for_label }}">Email Address</label>
                        {{ form.cus_email }}
                        {% if form.cus_email.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.cus_email.errors %}
                            <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <div class="form-group">
                        <label>Event Name</label>
                        <p>{{ event.name }}</p> <!-- Show event name -->
                    </div>
                    <div class="form-group">
                        <label>Event Date</label>
                        <p>{{ event.event_date|date:"F j, Y" }}</p> <!-- Show event date -->
                    </div>
                </div>

                <!-- Second Column: Venue, Date, Description, Requests -->
                <div class="col-md-6">
                    <!-- Venue -->
                    <div class="form-group">
                        <label for="{{ form.venue.id_for_label }}">Venue</label>
                        {{ form.venue }}
                        {% if form.venue.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.venue.errors %}
                            <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <!-- Preferred Booking Date -->
                    <div class="form-group">
                        <label for="{{ form.booking_date.id_for_label }}">Preferred Booking Date</label>
                        {{ form.booking_date }}
                        {% if form.booking_date.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.booking_date.errors %}
                            <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <!-- Event Description -->
                    <div class="form-group">
                        <label for="{{ form.description.id_for_label }}">Event Description</label>
                        {{ form.description }}
                        {% if form.description.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.description.errors %}
                            <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <!-- Special Requests -->
                    <div class="form-group">
                        <label for="{{ form.customer_request.id_for_label }}">Special Requests</label>
                        {{ form.customer_request }}
                        {% if form.customer_request.errors %}
                        <div class="invalid-feedback">
                            {% for error in form.customer_request.errors %}
                            <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-success btn-lg px-5 py-3 rounded-pill">Confirm Booking</button>
            </div>

            {% if form.errors %}
            <div class="alert alert-danger">
                <ul>
                    {% for field, errors in form.errors.items %}
                    <li><strong>{{ field }}</strong>: {{ errors|join:", " }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </form>
    </div>
</section>
{% endblock %}
